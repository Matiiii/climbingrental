<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<link th:include="fragments/header :: head" th:remove="tag" />

<link th:href="@{/css/products.css}" href="../static/css/products.css" rel="stylesheet"/>
</head>

<body>

<!-- Navigation -->
<div th:replace="fragments/header :: navbar">
   
</div>

	<!-- Page Content -->
	<div class="container">
		<div class="row">
			<div class="d-none d-md-block col-md-3">
				<p class="lead">Powiązane produkty:</p>
				<div class="list-group">
					<a th:each="tag : ${tags}" th:text="${tag.name}"
						th:href="${tag.link}" class="list-group-item">Category</a>
				</div>
			</div>
			<div class="col-sm-12 col-md-9">
                <div th:if="${info != null and info.status == true}"  th:utext="${info.message}"  class="alert alert-success">status produktu</div>
                <div th:if="${info != null and info.status == false}"  th:utext="${info.message}"  class="alert alert-danger">status produktu</div>
                
            <div class="thumbnail">
                <br class="caption-full">
                <div class="col">
                    <h4> <div align="pull-right"><a href="#" th:text="${product.productName}">LINY</a></div>
                    </h4></div>
                <div class="col">
                <h4 class="pull-right" th:text="|${product.price} zł / dzień|">2</h4></div>
               </br>
                <div class="row">
                    <div class="col-sm-6 col-md-6 col-lg-4"><br/>
                        <img class="img-responsive" th:src="${product.bigImage}" src="http://placehold.it/800x300"
                         th:alt="${product.bigImage}"/>
                    </div>
                    <div class="col-sm-6 col-md-6 col-lg-7">
                      <br/><br/>
                    <div align="justify"><p th:text="${product.description}">Lorem ipsum dolor sit amet, mei augue
                        molestie
                        disputationi no, pro praesent mnesarchum te. Etiam reprehendunt nam eu. Pri causae omnium in,
                        quidam
                        assueverit ex his. Te dicit elaboraret dissentiunt mea, ut vivendo consequuntur vim, vis brute
                        docendi pertinacia te. Ei zril blandit cum. Et sed prima libris, eu sint delicata delicatissimi
                        nam,
                        eu est tibique nominati mediocritatem.</p></div>
                        <br/><br/><br/>
                    <div align="center"><p th:text="| tagi produktu: ${product.tags}|">tagi, tagi, tagi</p></div>
                        </div>
                </div>
                <hr/>
                <div align="center">
                    <form id="orderForm" th:action="${postOrder}" th:object="${productOrder}" method="post">
                        <p>Wybierz okres, na który chcesz wypożyczyć sprzęt:</p>
                        <label for="from">od:</label>
                        <input type="text" id="from" name="from" th:field="*{orderStart}"/>
                        <label for="to">do:</label>
                        <input type="text" id="to" name="to" th:field="*{orderEnd}"/>
                        <input id="inputUser" type="hidden" class="form-control" th:field="*{userId}"/>
                        <input id="inputProduct" type="hidden" class="form-control" th:field="*{productId}"/>
                        <div class="form-group">
                            <button align="center" type="submit" class="btn btn-success">Wypożycz</button>
                        </div>
						</form>
					</div>
				</div>
			</div>

			<!-- /.container -->

        <div class="container">
            <!-- Footer -->
            <footer>
                <div class="row" th:replace="fragments/footer :: footer">static footer</div>
            </footer>
        </div>
        <!-- /.container -->

			<!-- Bootstrap Core JavaScript -->
			<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
			
            <script>
                $(function() {
                    var array = [];
                    var pathArray = window.location.pathname.split('/');
                    $.getJSON('http://localhost:8080/products-availability/'
                            + pathArray[pathArray.length - 1], function(result) {
                        $.each(result, function(i, field) {
                            array.push(field);
                        });
                    });

                    var dateFormat = "mm/dd/yy", from = $("#from").datepicker(
                            {
                                dateFormat : "mm/dd/yy",
                                beforeShowDay : function(date) {
                                    var string = jQuery.datepicker.formatDate(
                                            'mm/dd/yy', date);
                                    return [ array.indexOf(string) == -1 ]
                                }
                            }).on("change", function() {
                        to.datepicker("option", "minDate", getDate(this));
                    }), to = $("#to").datepicker(
                            {
                                dateFormat : "mm/dd/yy",
                                beforeShowDay : function(date) {
                                    var string = jQuery.datepicker.formatDate(
                                            'mm/dd/yy', date);
                                    return [ array.indexOf(string) == -1 ]
                                }
                            }).on("change", function() {
                        from.datepicker("option", "maxDate", getDate(this));
                    });

                    function getDate(element) {
                        var date;
                        try {
                            date = $.datepicker.parseDate(dateFormat, element.value);
                        } catch (error) {
                            date = null;
                        }
0,
                        return date;
                    }
                });
            </script>
		</div>
	</div>

</body>



</html>
